{%- extends 'base.html' %}
{%- block title %}{{ page_title|safe }}{%- endblock %}
{%- block content %}
<div class="row">
    <h4>{{ page_title|safe }}</h4>
    <div class="col-lg-3">
    <ul class="list-group">
        <li class="list-group-item">
            Total builds
            <span class="badge">{{ kernel.count }}</span>
        </li>
        <li class="list-group-item">
            Total defconfig
            <span class="badge">{{ defconf.count }}</span>
        </li>
    </ul>
    </div>
</div>
<div class="row">
    <table class="table table-hover table-striped">
        <thead>
            <tr>
                <th>Kernel</th>
                <th>Branch</th>
                <th>Commit</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        {%- for k in kernel.result %}
            <tr>
                <td>{{ k.kernel }}</td>
                {%- if k.metadata.git_branch %}
                <td>{{ k.metadata.git_branch }}</td>
                {%- else %}
                <td>N/A</td>
                {%- endif %}
                {%- if k.metadata.git_commit %}
                <td>{{ k.metadata.git_commit }}</td>
                {%- else %}
                <td>N/A</td>
                {%- endif %}
                <td>
                    <span rel="tooltip" data-toggle="tooltip" title="Details for {{k.job}} &dash; {{ k.kernel }}">
                    <a href="/job/{{ k.job }}/kernel/{{ k.kernel }}">
                    <i class="fa fa-search-plus"></i>
                    </a>
                    </span>
                </td>
            </tr>
        {%- endfor %}
        </tbody>
    </table>    
</div>
<div class="row">
    <div id="matrix">
        <table>
             <tbody>
                <tr>
                    <td class="defconf"></td>
                </tr>
                <tr id="row">
                    <td></td>
                </tr>
             </tbody>
        </table>
    </div>
</div>
{%- endblock %}
{%- block scripts %}
{{ super() }}
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.6/d3.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#li-job').addClass("active");
    $('body').tooltip({
        'selector': '[rel=tooltip]',
        'placement': 'auto top',
    });
});
</script>
{%- endblock %}
